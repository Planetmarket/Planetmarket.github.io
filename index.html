<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agriculture Flow Dashboard</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: sans-serif;
    min-height: 100vh;
    background: linear-gradient(160deg, #e6f4ea, #c6e0c3);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px;
    color: #000;
    overflow-x: hidden;
}

/* Header */
header {
    text-align: center;
    margin-bottom: 20px;
    width: 100%;
    max-width: 1400px;
}
header h1 {
    font-size: clamp(1.3rem, 5vw, 2.8rem);
    color: #000;
    word-wrap: break-word;
}
header p {
    font-size: clamp(0.8rem, 3vw, 1.3rem);
    color: #000;
    margin-top: 5px;
    font-style: italic;
    padding: 0 10px;
}

/* Main Layout */
main {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 1400px;
}

/* Grid Container */
.grid-container {
    width: 100%;
    position: relative;
    padding: 20px 10px;
    height: 70vh;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: clamp(10px, 2vw, 20px);
}

@media (max-width: 480px) {
    .grid-container {
        gap: clamp(8px, 1.5vw, 12px);
        padding: 15px 5px;
    }
}

/* Grid Cell - static positioned */
.grid-cell {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

/* Position cells in grid */
.cell-0-2 { grid-column: 3; grid-row: 1; }
.cell-1-0 { grid-column: 1; grid-row: 2; }
.cell-1-1 { grid-column: 2; grid-row: 2; }
.cell-1-2 { grid-column: 3; grid-row: 2; }
.cell-1-3 { grid-column: 4; grid-row: 2; }
.cell-1-4 { grid-column: 5; grid-row: 2; }
.cell-2-0 { grid-column: 1; grid-row: 3; }
.cell-2-1 { grid-column: 2; grid-row: 3; }
.cell-2-2 { grid-column: 3; grid-row: 3; }
.cell-2-3 { grid-column: 4; grid-row: 3; }
.cell-2-4 { grid-column: 5; grid-row: 3; }
.cell-3-3 { grid-column: 4; grid-row: 4; }

/* Buttons */
button {
    font-size: clamp(0.6rem, 1.8vw, 1rem);
    font-weight: 600;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: clamp(10px, 2.5vw, 16px) clamp(12px, 2.5vw, 18px);
    position: relative;
    line-height: 1.4;
    color: #fff;
    text-align: center;
    word-wrap: break-word;
    hyphens: auto;
    width: 85%;
    max-width: 100%;
    height: auto;
    min-height: fit-content;
}

@media (max-width: 768px) {
    button {
        font-size: clamp(0.55rem, 2vw, 0.85rem);
        padding: clamp(9px, 2.2vw, 14px) clamp(10px, 2.2vw, 16px);
        width: 90%;
    }
}

@media (max-width: 480px) {
    button {
        font-size: clamp(0.5rem, 2.5vw, 0.75rem);
        padding: clamp(8px, 2vw, 12px) clamp(8px, 2vw, 14px);
        width: 95%;
    }
}

@media (max-width: 360px) {
    button {
        font-size: clamp(0.45rem, 3vw, 0.7rem);
        padding: clamp(7px, 1.8vw, 10px) clamp(7px, 1.8vw, 12px);
        width: 98%;
    }
}

button:hover {
    transform: translateY(-3px) scale(1.03);
    box-shadow: 0 6px 12px rgba(0,0,0,0.25);
}

button:active {
    transform: translateY(0) scale(0.97);
    box-shadow: 0 3px 6px rgba(0,0,0,0.2);
}

.ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(255,255,255,0.5);
    transform: scale(0);
    animation: ripple 0.6s linear;
    pointer-events: none;
    z-index: 20;
}

@keyframes ripple {
    to { transform: scale(4); opacity: 0; }
}

/* Button Colors */
.row1-btn { background: linear-gradient(145deg, #FFB900, #FFC84D); color: #000; }
.row3-btn { background: linear-gradient(145deg, #ff4500, #ff6b42); color: #fff; }
.row5-btn { background: linear-gradient(145deg, #107C10, #3aa64a); color: #fff; }
.row7-btn { background: linear-gradient(145deg, #006ee6, #3b9fff); color: #fff; }

/* SVG Lines */
svg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
}

.line {
    stroke: #000;
    stroke-width: 2;
    fill: none;
    stroke-linecap: round;
    stroke-dasharray: 5 5;
    animation: flow 2s linear infinite;
    transition: stroke 0.3s ease;
    opacity: 0.6;
}

@keyframes flow {
    to { stroke-dashoffset: -20; }
}

.grid-container:hover .line {
    stroke: #00f;
    opacity: 0.8;
}

/* Details Panel */
.details-panel {
    background: rgba(255,255,255,0.9);
    padding: clamp(15px, 3vw, 25px);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 100%;
    min-height: 100px;
    font-size: clamp(0.85rem, 2.2vw, 1.1rem);
    color: #333;
    white-space: pre-line;
    line-height: 1.6;
    margin-top: 20px;
    word-wrap: break-word;
}

/* Footer */
footer {
    margin-top: 30px;
    display: flex;
    gap: clamp(20px, 5vw, 50px);
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    padding: 10px;
}

footer a img {
    width: clamp(35px, 8vw, 50px);
    height: clamp(35px, 8vw, 50px);
    object-fit: contain;
    transition: transform 0.2s;
}

footer a img:hover {
    transform: scale(1.2);
}
</style>
</head>

<body>

<header>
    <h1>Agriculture Flow Dashboard</h1>
    <p>Explore goals, problems, solutions, and technologies interactively</p>
</header>

<main>
    <div class="grid-container">
        <svg id="connectionSvg"></svg>

        <!-- Row 1 -->
        <div class="grid-cell cell-0-2">
            <button class="row1-btn" data-row="0" data-col="2" data-description="Ensure stable agriculture income through sustainable practices.">Agriculture Income</button>
        </div>

        <!-- Row 2 -->
        <div class="grid-cell cell-1-0">
            <button class="row3-btn" data-row="1" data-col="0" data-description="Weather unpredictability affects crops and yields.">Weather</button>
        </div>
        <div class="grid-cell cell-1-1">
            <button class="row3-btn" data-row="1" data-col="1" data-description="Pest infestations reduce productivity.">Pest</button>
        </div>
        <div class="grid-cell cell-1-2">
            <button class="row3-btn" data-row="1" data-col="2" data-description="Small farms have limited resources and capacity.">Small Farms</button>
        </div>
        <div class="grid-cell cell-1-3">
            <button class="row3-btn" data-row="1" data-col="3" data-description="Market price volatility affects farmers' income.">Price</button>
        </div>
        <div class="grid-cell cell-1-4">
            <button class="row3-btn" data-row="1" data-col="4" data-description="Intermediaries often reduce farmers' profit margins.">Intermediaries</button>
        </div>

        <!-- Row 3 -->
        <div class="grid-cell cell-2-0">
            <button class="row5-btn" data-row="2" data-col="0" data-description="Adaptable strategies to uncontrollable events.">Uncontrollable</button>
        </div>
        <div class="grid-cell cell-2-1">
            <button class="row5-btn" data-row="2" data-col="1" data-description="Proper pesticide management to reduce losses.">Pesticides</button>
        </div>
        <div class="grid-cell cell-2-2">
            <button class="row5-btn" data-row="2" data-col="2" data-description="Improve processing to increase finished products.">Finished Products</button>
        </div>
        <div class="grid-cell cell-2-3">
            <button class="row5-btn" data-row="2" data-col="3" data-description="Use data to anticipate demand accurately.">Demand Data</button>
        </div>
        <div class="grid-cell cell-2-4">
            <button class="row5-btn" data-row="2" data-col="4" data-description="Implement practices to avoid losses.">Avoidable</button>
        </div>

        <!-- Row 4 -->
        <div class="grid-cell cell-3-3">
            <button class="row7-btn" data-row="3" data-col="3" data-description="Planet Market technologies facilitate applying solutions.">Planet Market</button>
        </div>
    </div>

    <div class="details-panel" id="detailsPanel">
        Click a button to see friendly insights here.
    </div>
</main>

<footer>
    <a href="https://wa.me/" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp"></a>
    <a href="mailto:example@gmail.com"><img src="https://www.google.com/s2/favicons?domain=gmail.com&sz=48" alt="Gmail"></a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=YOUR_URL" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook Share"></a>
</footer>

<script>
function getGridCellCenter(row, col) {
    const container = document.querySelector('.grid-container');
    const containerRect = container.getBoundingClientRect();
    const gridGap = parseFloat(getComputedStyle(container).gap);
    
    // Calculate cell dimensions
    const containerWidth = containerRect.width - (container.offsetWidth - container.clientWidth);
    const containerHeight = containerRect.height - (container.offsetHeight - container.clientHeight);
    const cellWidth = (containerWidth - gridGap * 4) / 5;
    const cellHeight = (containerHeight - gridGap * 3) / 4;
    
    // Calculate center of the grid cell
    const x = (col * (cellWidth + gridGap)) + (cellWidth / 2);
    const y = (row * (cellHeight + gridGap)) + (cellHeight / 2);
    
    return { x, y };
}

function drawConnections() {
    const svg = document.getElementById('connectionSvg');
    svg.innerHTML = '';
    
    // Connection definitions using grid coordinates
    const connections = [
        // Problems to Goal
        {from: {row: 1, col: 0}, to: {row: 0, col: 2}},
        {from: {row: 1, col: 1}, to: {row: 0, col: 2}},
        {from: {row: 1, col: 2}, to: {row: 0, col: 2}},
        {from: {row: 1, col: 3}, to: {row: 0, col: 2}},
        {from: {row: 1, col: 4}, to: {row: 0, col: 2}},
        
        // Problems to Solutions (paired)
        {from: {row: 1, col: 0}, to: {row: 2, col: 0}},
        {from: {row: 1, col: 1}, to: {row: 2, col: 1}},
        {from: {row: 1, col: 2}, to: {row: 2, col: 2}},
        {from: {row: 1, col: 3}, to: {row: 2, col: 3}},
        {from: {row: 1, col: 4}, to: {row: 2, col: 4}},
        
        // Solutions to Technology
        {from: {row: 2, col: 2}, to: {row: 3, col: 3}},
        {from: {row: 2, col: 3}, to: {row: 3, col: 3}},
        {from: {row: 2, col: 4}, to: {row: 3, col: 3}}
    ];

    connections.forEach(conn => {
        const fromCenter = getGridCellCenter(conn.from.row, conn.from.col);
        const toCenter = getGridCellCenter(conn.to.row, conn.to.col);
        
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.classList.add('line');
        line.setAttribute('x1', fromCenter.x);
        line.setAttribute('y1', fromCenter.y);
        line.setAttribute('x2', toCenter.x);
        line.setAttribute('y2', toCenter.y);
        svg.appendChild(line);
    });
}

// Initial draw and redraw on resize
window.addEventListener('load', drawConnections);
window.addEventListener('resize', drawConnections);

const resizeObserver = new ResizeObserver(drawConnections);
resizeObserver.observe(document.querySelector('.grid-container'));

// Button interactions
const detailsPanel = document.getElementById('detailsPanel');
document.querySelectorAll('button').forEach(btn => {
    btn.addEventListener('click', e => {
        // Ripple effect
        const circle = document.createElement('span');
        circle.classList.add('ripple');
        const rect = btn.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        circle.style.width = circle.style.height = size + 'px';
        circle.style.left = (e.clientX - rect.left - size / 2) + 'px';
        circle.style.top = (e.clientY - rect.top - size / 2) + 'px';
        btn.appendChild(circle);
        setTimeout(() => circle.remove(), 600);

        // Update details panel
        detailsPanel.textContent = btn.dataset.description;
    });
});
</script>

</body>
</html>
